### **아이돌 이슈 수집 및 Shorts 콘텐츠 제작 개발 문서**

---

### **1. 프로젝트 개요**
- **목적:**
  1. 아이돌과 관련된 논란거리, 긍정적인 홍보 콘텐츠, 그리고 유튜브 영상 스니펫 데이터를 자동으로 수집 및 전처리.
  2. 수집된 데이터를 바탕으로 유튜브 Shorts에 적합한 콘텐츠 제작.
  
- **주요 기능:**
  1. **논란거리 수집:**
     - 논란 키워드와 감정 분석을 기반으로 아이돌과 관련된 논란 콘텐츠를 탐지 및 수집.
  2. **긍정적 홍보 콘텐츠 수집:**
     - 긍정 키워드와 감정 분석을 기반으로 잘생김, 예쁨 등 긍정적 이미지를 부각하는 콘텐츠와 관련 이미지를 수집.
  3. **유튜브 스니펫 생성:**
     - 유튜브 API를 통해 특정 아이돌 영상을 분석, 조회수 피크를 중심으로 1분 스니펫을 생성.
  4. **전처리 및 콘텐츠 생성:**
     - LLaMA를 활용해 수집된 데이터를 분석하고 자극적이거나 흥미로운 형태로 전처리.
  5. **중복 데이터 관리:**
     - 저장된 데이터와 비교하여 제목, URL 등의 중복을 감지하고 불필요한 중복 데이터 제거.
  6. **다국어 지원:**
     - 한국어, 영어, 일본어로 데이터 번역 및 콘텐츠 생성 지원.

---

### **2. 주요 기능 설명**

#### **2.1 논란거리 수집 기능**
- **데이터 소스:**
  - 뉴스 (네이버, 다음 등)
  - 커뮤니티 (디시인사이드, 에펨코리아, 네이트판, 레딧 등)

- **구현 방식:**
  - **키워드 탐지:** "논란", "폭로", "충격" 등의 키워드를 기반으로 데이터 필터링.
  - **감정 분석:** 부정적 감정 스코어가 높은 데이터를 추가로 탐지.
  - **MongoDB 저장:** 논란 여부와 점수를 함께 저장.

- **저장 구조:**
  ```json
  {
    "name": "아이유",
    "category": "논란",
    "title": "아이유 논란의 중심?",
    "content": "아이유가 최근 논란에 휩싸였다...",
    "url": "https://example.com",
    "views": 1234,
    "comments": [],
    "controversial": true,
    "controversy_score": 0.92,
    "timestamp": "2024-12-13T12:00:00"
  }
  ```

#### **2.2 긍정적 홍보 콘텐츠 수집 기능**
- **데이터 소스:**
  - 커뮤니티 (디시인사이드, 에펨코리아)
  - 소셜 미디어 (트위터, 레딧 등)

- **구현 방식:**
  - **키워드 탐지:** "잘생겼다", "예쁘다", "귀엽다" 등의 긍정 키워드를 탐지.
  - **이미지/GIF 수집:**
    - 게시글에 포함된 미디어 파일 저장.
    - 추가적으로 Google Images와 Giphy API 활용.

- **MongoDB 저장:**
  ```json
  {
    "name": "BTS",
    "category": "긍정",
    "title": "BTS 잘생김 대박!",
    "content": "BTS 비주얼, 전설로 남다...",
    "url": "https://example.com",
    "views": 5678,
    "comments": [],
    "media": ["image1.jpg", "gif1.gif"],
    "positive_score": 0.88,
    "timestamp": "2024-12-13T12:30:00"
  }
  ```

#### **2.3 유튜브 영상 스니펫 생성 기능**
- **데이터 소스:**
  - 유튜브 API

- **구현 방식:**
  - **유튜브 검색:**
    - 특정 아이돌 이름으로 유튜브 검색.
    - 상위 노출된 영상의 제목, URL, 조회수, 댓글 수 등을 저장.
  - **조회수 피크 분석:**
    - 조회수 데이터에서 피크 타이밍을 탐지.
    - 최대 3개의 조회수 피크 구간을 추출.
  - **1분 스니펫 생성:**
    - 피크 타이밍 전후 30초씩 합쳐 1분 동영상 생성.

- **스니펫 배치 최적화:**
  - 조회수 피크 외에도 대사, 감정 변화, 반응 등 영상의 맥락을 분석하여 스니펫 구간 선택.

- **MongoDB 저장:**
  ```json
  {
    "name": "BLACKPINK",
    "category": "유튜브",
    "title": "BLACKPINK's New Song",
    "url": "https://youtube.com/watch?v=abc123",
    "views": 1000000,
    "snippets": [
      {
        "start": 30,
        "end": 90,
        "file_path": "snippet1.mp4"
      },
      {
        "start": 120,
        "end": 180,
        "file_path": "snippet2.mp4"
      }
    ],
    "timestamp": "2024-12-13T13:00:00"
  }
  ```

#### **2.4 전처리 및 콘텐츠 생성 기능**
- **목적:**
  - 수집된 데이터를 기반으로 유튜브 Shorts용 콘텐츠 생성.

- **구현 방식:**
  - **데이터 점수 산정:**
    - 조회수, 댓글 수, 감정 분석 스코어를 기반으로 7점 이상인 데이터만 전처리.
  - **LLaMA 기반 전처리:**
    - 데이터를 각색하여 더 재미있고 흥미롭게 수정.
    - 댓글도 자극적이고 반응을 유도하도록 각색.
    - 다국어 콘텐츠 생성(한국어, 영어, 일본어).
  - **유튜브 스크립트 생성:**
    - 제목, 내용, 댓글을 활용하여 스니펫 영상의 스크립트를 자동 생성.

- **저장 구조:**
  ```json
  {
    "processed": true,
    "score": 8.5,
    "generated_title": "BTS의 무대, 전설로 남다!",
    "content_segments": [
      {
        "content": "BTS 비주얼 전설급! [glow]",
        "tags": "Victory"
      },
      {
        "content": "팬들 반응 폭발ㅋㅋㅋ [coin]",
        "tags": "Joy"
      }
    ],
    "comments_segments": [
      "진짜 역대급ㅋㅋ [pew]",
      "이건 전설로 남는다... [glow]"
    ]
  }
  ```

---

### **3. 기술 스택**
- **데이터 수집:**
  - Python (BeautifulSoup, Selenium, PRAW, Tweepy)
  - 유튜브 API, Giphy API
- **AI 모델:**
  - LLaMA, GPT-4
  - Hugging Face Transformers
- **데이터 저장:**
  - MongoDB
  - AWS S3 (이미지/GIF/스니펫 저장)
- **동영상 처리:**
  - FFmpeg, Python MoviePy
- **스케줄링 로직 안정성:**
  - APScheduler를 활용해 작업 충돌 방지 및 안정성 보장.

---

### **4. 개발 단계**
1. **데이터 수집 모듈 개발:**
   - 논란거리, 긍정 콘텐츠, 유튜브 데이터 크롤링 구현.
2. **데이터 전처리 모듈 개발:**
   - LLaMA를 활용한 데이터 각색 및 점수 필터링.
3. **유튜브 스니펫 생성:**
   - 조회수 분석 및 스니펫 트리밍 로직 구현.
4. **다국어 지원 확장:**
   - 한국어, 영어, 일본어로 데이터 번역 및 콘텐츠 생성.
5. **통합 테스트:**
   - 수집, 저장, 전처리, 스니펫 생성 전 과정 통합 테스트.
6. **배포 및 유지보수:**
   - 스케줄링 및 데이터 업데이트 자동화.

---

### **5. 기대 효과**
- **효율성:** 자동화된 수집 및 전처리로 콘텐츠 제작 시간 단축.
- **콘텐츠 품질:** LLaMA 기반 전처리로 흥미 유발 콘텐츠 생성.
- **확장성:** 추가 키워드 및 새로운 데이터 소스 통합 용이.
- **글로벌 도달성:** 다국어 콘텐츠 지원으로 글로벌 시장 확장 가능.

